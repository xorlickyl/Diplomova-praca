<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Hello World!</title>
    <meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline';" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
</head>
<body style="background: white;text-align: center;">
    <h3>Diplomova praca</h3>
    <div class="row">
        <div class="col">
            <table id="table" style="text-align: center;">
                <tr>
                    <th>Tag</th>
                    <th>Value</th>
                </tr>
            </table>
        </div>

    </div>
    <div class="row">
        <div class="col">
            <button id="backB" type="button" class="btn btn-primary">Back</button>
        </div>
        <div class="col">
            <p>Download data:
                <button id="download" type="submit" class="btn btn-primary">Download</button>
            </p>
        </div>
    </div>
</body>
<script>
    const backButton = document.getElementById("backB");
    backButton.addEventListener('click', function (){
        location.href="index.html";
    })
    var json;
    const {ipcRenderer} = require('electron');
     ipcRenderer.on('data',function (event,param) {
         json = param;
         for(var i=0; i<15; i++){
             var tr = document.createElement("tr");
             tr.id="tbRow"+i;
             document.getElementById("table").appendChild(tr);

             var td_1 = document.createElement("td");
             td_1.innerText = param[i].tag;
             document.getElementById("table").appendChild(td_1);
             var td_2 = document.createElement("td");
             td_2.innerText = param[i].value;
             document.getElementById("table").appendChild(td_2);
        }
    });

     const download = document.getElementById("download");
     download.addEventListener('click', function (){
         console.log(json);
         ipcRenderer.send('download', json);
     })

</script>
</html>
