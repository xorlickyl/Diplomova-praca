<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Hello World!</title>
    <meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline';" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
</head>
<body style="background: #f9f9f9;text-align: center;">
    <h3>Diplomova praca</h3>
    <div class="row">
        <div class="col-md-8 offset-md-2">
            <table id="table" style="text-align: center; border: 1px solid black">
                <tr>
                    <th style="border: 1px solid black;">Tag</th>
                    <th style="border: 1px solid black;">Value</th>
                </tr>
            </table>
        </div>

    </div>
    <div class="row" style="margin-top: 10px">
        <div class="col">
            <button id="backB" type="button" class="btn btn-primary" style="color: black"><img src="img/back.png" width="25" height="25">Back</button>
        </div>
        <div class="col">
                <button id="download" type="submit" class="btn btn-primary" style="color: black"><img src="img/download.png" width="25" height="25">Download</button>
        </div>
    </div>
</body>
<script>
    const backButton = document.getElementById("backB");
    backButton.addEventListener('click', function (){
        location.href="index.html";
    })
    var json;
    const {ipcRenderer} = require('electron');
     ipcRenderer.on('data',function (event,param) {
         json = param;
         for(var i=0; i<15; i++){
             if(param[i].value!="") {
                 var tr = document.createElement("tr");
                 tr.id = "tbRow" + i;
                 document.getElementById("table").appendChild(tr);

                 var td_1 = document.createElement("td");
                 td_1.innerText = param[i].element;
                 td_1.style.borderStyle="solid";
                 td_1.style.borderColor="black";
                 td_1.style.borderWidth="1px";
                 document.getElementById("table").appendChild(td_1);
                 var td_2 = document.createElement("td");
                 td_2.innerText = param[i].value;
                 td_2.style.borderStyle="solid";
                 td_2.style.borderWidth="1px";
                 td_2.style.borderColor="black";
                 document.getElementById("table").appendChild(td_2);
             }
        }
    });

     const download = document.getElementById("download");
     download.addEventListener('click', function (){
         console.log(json);
         ipcRenderer.send('download', json);
     })

</script>
</html>
